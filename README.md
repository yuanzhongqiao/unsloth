<div class="Box-sc-g0xbh4-0 bJMeLZ js-snippet-clipboard-copy-unpositioned" data-hpc="true"><article class="markdown-body entry-content container-lg" itemprop="text"><div align="center" dir="auto">
<p dir="auto"><a href="https://unsloth.ai" rel="nofollow"><themed-picture data-catalyst-inline="true" data-catalyst=""><picture>
<source media="(prefers-color-scheme: dark)" srcset="https://raw.githubusercontent.com/unslothai/unsloth/main/images/unsloth%20logo%20white%20text.png">
<source media="(prefers-color-scheme: light)" srcset="https://raw.githubusercontent.com/unslothai/unsloth/main/images/unsloth%20logo%20black%20text.png">
<img alt="不懒惰的标志" src="https://raw.githubusercontent.com/unslothai/unsloth/main/images/unsloth%20logo%20black%20text.png" height="110" style="visibility:visible;max-width:100%;">
</picture></themed-picture></a></p>
<p dir="auto"><a href="https://colab.research.google.com/drive/135ced7oHytdxu3N2DNe1Z0kqjyYIkDXp?usp=sharing" rel="nofollow"><img src="https://raw.githubusercontent.com/unslothai/unsloth/main/images/start free finetune button.png" height="48" style="max-width: 100%;"></a>
<a href="https://discord.gg/u54VK8m8tk" rel="nofollow"><img src="https://raw.githubusercontent.com/unslothai/unsloth/main/images/Discord button.png" height="48" style="max-width: 100%;"></a>
<a href="https://ko-fi.com/unsloth" rel="nofollow"><img src="https://raw.githubusercontent.com/unslothai/unsloth/main/images/buy me a coffee button.png" height="48" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">微调 Mistral、Gemma、Llama 速度提高 2-5 倍，内存减少 80%！</font></font></h3><a id="user-content-finetune-mistral-gemma-llama-2-5x-faster-with-80-less-memory" class="anchor" aria-label="永久链接：微调 Mistral、Gemma、Llama 速度提高 2-5 倍，内存减少 80%！" href="#finetune-mistral-gemma-llama-2-5x-faster-with-80-less-memory"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/cf2210423ec035ee9dde7baab47e7dd279ac448c39e686bfc5a1129d0abc4a39/68747470733a2f2f692e6962622e636f2f734a37526847472f696d6167652d34312e706e67"><img src="https://camo.githubusercontent.com/cf2210423ec035ee9dde7baab47e7dd279ac448c39e686bfc5a1129d0abc4a39/68747470733a2f2f692e6962622e636f2f734a37526847472f696d6167652d34312e706e67" alt="" data-canonical-src="https://i.ibb.co/sJ7RhGG/image-41.png" style="max-width: 100%;"></a></p>
</div>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">✨ 免费微调</font></font></h2><a id="user-content--finetune-for-free" class="anchor" aria-label="永久链接：✨ 免费微调" href="#-finetune-for-free"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有笔记本电脑都</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">适合初学者</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">！添加您的数据集，单击“全部运行”，您将获得速度提高 2 倍的微调模型，该模型可以导出到 GGUF、vLLM 或上传到 Hugging Face。</font></font></p>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰的支持</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">免费笔记本</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表现</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内存使用</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">骆驼-3 8b</font></font></strong></td>
<td><a href="https://colab.research.google.com/drive/135ced7oHytdxu3N2DNe1Z0kqjyYIkDXp?usp=sharing" rel="nofollow"><g-emoji class="g-emoji" alias="arrow_forward"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▶️</font></font></g-emoji><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从 Colab 开始</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">速度提高 2 倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">减少 60%</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">杰玛7b</font></font></strong></td>
<td><a href="https://colab.research.google.com/drive/10NbwlsRChbma1v55m8LAPYG15uQv6HLo?usp=sharing" rel="nofollow"><g-emoji class="g-emoji" alias="arrow_forward"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▶️</font></font></g-emoji><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从 Colab 开始</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">速度提高 2.4 倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">减少 71%</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">米斯特拉尔7b</font></font></strong></td>
<td><a href="https://colab.research.google.com/drive/1Dyauq4kTZoLewQ1cApceUQVNcnnNTzg_?usp=sharing" rel="nofollow"><g-emoji class="g-emoji" alias="arrow_forward"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▶️</font></font></g-emoji><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从 Colab 开始</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">速度提高 2.2 倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">减少 73%</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小羊驼</font></font></strong></td>
<td><a href="https://colab.research.google.com/drive/1AZghoNBQaMDgWJpi4RbffGM1h6raLUj9?usp=sharing" rel="nofollow"><g-emoji class="g-emoji" alias="arrow_forward"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▶️</font></font></g-emoji><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从 Colab 开始</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">速度提高 3.9 倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">减少 82%</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码Llama 34b</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A100</font></font></td>
<td><a href="https://colab.research.google.com/drive/1y7A0AxE3y8gdj4AVkl2aZX47Xu3P1wJT?usp=sharing" rel="nofollow"><g-emoji class="g-emoji" alias="arrow_forward"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▶️</font></font></g-emoji><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从 Colab 开始</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">速度提高 1.9 倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">减少 49%</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">米斯特拉尔 7b</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1xT4</font></font></td>
<td><a href="https://www.kaggle.com/code/danielhanchen/kaggle-mistral-7b-unsloth-notebook" rel="nofollow"><g-emoji class="g-emoji" alias="arrow_forward"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▶️</font></font></g-emoji><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从 Kaggle 开始</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">速度提高 5 倍*</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">减少 73%</font></font></td>
</tr>
<tr>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DPO-Zephyr</font></font></strong></td>
<td><a href="https://colab.research.google.com/drive/15vttTpzzVXv_tJwEk-hIcQ0S9FcEWvwP?usp=sharing" rel="nofollow"><g-emoji class="g-emoji" alias="arrow_forward"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▶️</font></font></g-emoji><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从 Colab 开始</font></font></a></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">速度提高 1.9 倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">减少 43%</font></font></td>
</tr>
</tbody>
</table>
<ul dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与 FA2 + Hugging Face 组合进行基准比较。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此</font></font><a href="https://colab.research.google.com/drive/1Aau3lgPzeZKQ-98h69CCu1UJcvIBLmy2?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会话笔记本</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于 ShareGPT ChatML / Vicuna 模板非常有用。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此文</font></font><a href="https://colab.research.google.com/drive/1ef-tab5bhkvWmBOObepl1WgJvfvSzn5Q?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本完成笔记本</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">适用于原始文本。这款</font></font><a href="https://colab.research.google.com/drive/15vttTpzzVXv_tJwEk-hIcQ0S9FcEWvwP?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DPO 笔记本</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">复制了 Zephyr。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* Kaggle 有 2 个 T4，但我们使用 1 个。由于开销，1 个 T4 速度快了 5 倍。</font></font></li>
</ul>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">🦥 Unsloth.ai 新闻</font></font></h2><a id="user-content--unslothai-news" class="anchor" aria-label="永久链接：🦥 Unsloth.ai 新闻" href="#-unslothai-news"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">📣 新！</font></font><a href="https://colab.research.google.com/drive/135ced7oHytdxu3N2DNe1Z0kqjyYIkDXp?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Llama-3 8b</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在可以使用了！ Llama-3 70b 也可以（只需更改笔记本中的型号名称）。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">📣 新！我们将内存使用量进一步减少了</font></font><a href="https://unsloth.ai/blog/long-context" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">30% ，现在支持使用</font></font></a><font style="vertical-align: inherit;"></font><a href="https://unsloth.ai/blog/long-context" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4 倍长的上下文窗口</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对 LLM 进行微调</font><font style="vertical-align: inherit;">！如果您使用我们的笔记本电脑，则无需进行任何更改。要启用，只需更改 1 行：</font></font></li>
</ul>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto"><pre><span class="pl-s1">model</span> <span class="pl-c1">=</span> <span class="pl-v">FastLanguageModel</span>.<span class="pl-en">get_peft_model</span>(
    <span class="pl-s1">model</span>,
    <span class="pl-s1">use_gradient_checkpointing</span> <span class="pl-c1">=</span> <span class="pl-s">"unsloth"</span>, <span class="pl-c"># &lt;&lt;&lt;&lt;&lt;&lt;&lt;</span>
)</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="model = FastLanguageModel.get_peft_model(
    model,
    use_gradient_checkpointing = &quot;unsloth&quot;, # <<<<<<<
)" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<ul dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">📣 </font></font><a href="https://colab.research.google.com/drive/19lwcRk_ZQ_ZtX-qzFP3qZBBHZNcMD1hh?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CodeGemma</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在可与</font></font><a href="https://colab.research.google.com/drive/10NbwlsRChbma1v55m8LAPYG15uQv6HLo?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gemma 7b</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://colab.research.google.com/drive/15gGm7x_jTm017_Ic8e317tdIpDG53Mtu?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gemma 2b一起使用</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">📣</font><font style="vertical-align: inherit;">所有模型的</font></font><a href="https://colab.research.google.com/drive/15vttTpzzVXv_tJwEk-hIcQ0S9FcEWvwP?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">推理速度提高了 2 倍</font></font></a><font style="vertical-align: inherit;"></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">📣</font><font style="vertical-align: inherit;">现已包含</font></font><a href="https://colab.research.google.com/drive/15vttTpzzVXv_tJwEk-hIcQ0S9FcEWvwP?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DPO 支持</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。有关 DPO 的</font></font><a href="#DPO"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更多信息</font></font></a><font style="vertical-align: inherit;"></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">📣 我们用 🤗Hugging Face 写了一个</font></font><a href="https://huggingface.co/blog/unsloth-trl" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">博客</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并在他们的官方文档中！查看</font></font><a href="https://huggingface.co/docs/trl/main/en/sft_trainer#accelerate-fine-tuning-2x-using-unsloth" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SFT 文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://huggingface.co/docs/trl/main/en/dpo_trainer#accelerate-dpo-fine-tuning-using-unsloth" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DPO 文档</font></font></a></li>
</ul>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">🔗 链接和资源</font></font></h2><a id="user-content--links-and-resources" class="anchor" aria-label="永久链接：🔗 链接和资源" href="#-links-and-resources"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">链接</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">📚</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">维基百科和常见问题解答</font></font></strong></td>
<td><a href="https://github.com/unslothai/unsloth/wiki"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阅读我们的维基</font></font></a></td>
</tr>
<tr>
<td><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/e3925fb808b1a21072b2795774bd0fddbaa10b5dfbd8e8fa1d904d897bb1bd6e/68747470733a2f2f75706c6f61642e77696b696d656469612e6f72672f77696b6970656469612f636f6d6d6f6e732f362f36662f4c6f676f5f6f665f547769747465722e737667"><img height="14" src="https://camo.githubusercontent.com/e3925fb808b1a21072b2795774bd0fddbaa10b5dfbd8e8fa1d904d897bb1bd6e/68747470733a2f2f75706c6f61642e77696b696d656469612e6f72672f77696b6970656469612f636f6d6d6f6e732f362f36662f4c6f676f5f6f665f547769747465722e737667" data-canonical-src="https://upload.wikimedia.org/wikipedia/commons/6/6f/Logo_of_Twitter.svg" style="max-width: 100%;"></a>&nbsp; <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">推特（又名 X）</font></font></strong></td>
<td><a href="https://twitter.com/unslothai" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在 X 上关注我们</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">📜</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档</font></font></strong></td>
<td><a href="https://github.com/unslothai/unsloth/tree/main#-documentation"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阅读文档</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">💾</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装</font></font></strong></td>
<td><a href="https://github.com/unslothai/unsloth/tree/main#installation-instructions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰/README.md</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">🥇</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基准测试</font></font></strong></td>
<td><a href="https://github.com/unslothai/unsloth/tree/main#-performance-benchmarking"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能表</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">🌐</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已发布型号</font></font></strong></td>
<td><a href="https://huggingface.co/unsloth" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰的发布</font></font></a></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">✍️</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">博客</font></font></strong></td>
<td><a href="https://unsloth.ai/blog" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阅读我们的博客</font></font></a></td>
</tr>
</tbody>
</table>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">⭐ 主要特点</font></font></h2><a id="user-content--key-features" class="anchor" aria-label="永久链接：⭐ 主要特点" href="#-key-features"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><font style="vertical-align: inherit;"></font><a href="https://openai.com/research/triton" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有内核均采用OpenAI 的 Triton</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">语言编写</font><font style="vertical-align: inherit;">。</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">手动反向传播引擎</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">精度损失为 0%</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - 无近似方法 - 全部精确。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有改变硬件。自 2018 年起支持 NVIDIA GPU。最低 CUDA 能力 7.0（V100、T4、Titan V、RTX 20、30、40x、A100、H100、L40 等）</font></font><a href="https://developer.nvidia.com/cuda-gpus" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">检查您的 GPU！</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> GTX 1070、1080 可以工作，但速度很慢。</font></font></li>
<li><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过 WSL 在Linux</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上运行</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"></font><a href="https://github.com/TimDettmers/bitsandbytes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过bitsandbytes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持4位和16位QLoRA/LoRA微调</font><font style="vertical-align: inherit;">。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">开源训练速度提高了 5 倍 - 请参阅</font></font><a href="https://unsloth.ai/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unsloth Pro</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以获得高达</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">30 倍的训练速度</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">！</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您使用 🦥Unsloth 训练了模型，则可以使用这个很酷的贴纸！ &nbsp; </font></font><a target="_blank" rel="noopener noreferrer nofollow" href="https://raw.githubusercontent.com/unslothai/unsloth/main/images/made with unsloth.png"><img src="https://raw.githubusercontent.com/unslothai/unsloth/main/images/made with unsloth.png" height="50" align="center" style="max-width: 100%;"></a></li>
</ul>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">🥇 性能基准测试</font></font></h2><a id="user-content--performance-benchmarking" class="anchor" aria-label="永久链接：🥇 性能基准测试" href="#-performance-benchmarking"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><font style="vertical-align: inherit;"></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关可复制</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基准测试表的完整列表</font><font style="vertical-align: inherit;">，</font></font><a href="https://unsloth.ai/blog/mistral-benchmark#Benchmark%20tables" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请访问我们的网站</font></font></a></li>
</ul>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 个 A100 40GB</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">🤗抱脸</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">闪光注意</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">🦥Unsloth 开源</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">🦥</font></font><a href="https://unsloth.ai/pricing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">消除懒惰专业版</font></font></a></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">羊驼毛</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1x</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.04倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.98倍</font></font></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15.64倍</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">莱昂芯片2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1x</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.92倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.61倍</font></font></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.73倍</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">欧亚斯特</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1x</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.19倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.17倍</font></font></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.83倍</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">苗条逆戟鲸</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1x</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.18倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.22倍</font></font></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.82倍</font></font></strong></td>
</tr>
</tbody>
</table>
<ul dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下面的基准测试表是由</font></font><a href="https://huggingface.co/blog/unsloth-trl" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">🤗Hugging Face</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进行的。</font></font></li>
</ul>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">免费Colab T4</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数据集</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">🤗抱脸</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">火炬2.1.1</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">🦥不懒惰</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">🦥 显存减少</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">骆驼-2 7b</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">欧亚斯特</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1x</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.19倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.95倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-43.3%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">米斯特拉尔7b</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">羊驼毛</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1x</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.07倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.56倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-13.7%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">小羊驼 1.1b</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">羊驼毛</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1x</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.06倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.87倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-73.8%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DPO 与 Zephyr</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">超级聊天</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1x</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.09倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.55倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-18.6%</font></font></td>
</tr>
</tbody>
</table>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/cf2210423ec035ee9dde7baab47e7dd279ac448c39e686bfc5a1129d0abc4a39/68747470733a2f2f692e6962622e636f2f734a37526847472f696d6167652d34312e706e67"><img src="https://camo.githubusercontent.com/cf2210423ec035ee9dde7baab47e7dd279ac448c39e686bfc5a1129d0abc4a39/68747470733a2f2f692e6962622e636f2f734a37526847472f696d6167652d34312e706e67" alt="" data-canonical-src="https://i.ibb.co/sJ7RhGG/image-41.png" style="max-width: 100%;"></a></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">💾 安装说明</font></font></h2><a id="user-content--installation-instructions" class="anchor" aria-label="永久链接：💾 安装说明" href="#-installation-instructions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">康达安装</font></font></h3><a id="user-content-conda-installation" class="anchor" aria-label="永久链接：Conda 安装" href="#conda-installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">选择</font></font><code>pytorch-cuda=11.8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CUDA 11.8 或</font></font><code>pytorch-cuda=12.1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CUDA 12.1。如果有</font></font><code>mamba</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请使用</font></font><code>mamba</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代替 来</font></font><code>conda</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更快地求解。请参阅此</font></font><a href="https://github.com/unslothai/unsloth/issues/73" data-hovercard-type="issue" data-hovercard-url="/unslothai/unsloth/issues/73/hovercard"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Github 问题</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以获取有关调试 Conda 安装的帮助。</font></font></p>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto"><pre>conda create --name unsloth_env python=3.10
conda activate unsloth_env

conda install pytorch-cuda=<span class="pl-k">&lt;</span>12.1/11.<span class="pl-k">8&gt;</span> pytorch cudatoolkit xformers -c pytorch -c nvidia -c xformers

pip install <span class="pl-s"><span class="pl-pds">"</span>unsloth[colab-new] @ git+https://github.com/unslothai/unsloth.git<span class="pl-pds">"</span></span>

pip install --no-deps trl peft accelerate bitsandbytes</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="conda create --name unsloth_env python=3.10
conda activate unsloth_env

conda install pytorch-cuda=<12.1/11.8> pytorch cudatoolkit xformers -c pytorch -c nvidia -c xformers

pip install &quot;unsloth[colab-new] @ git+https://github.com/unslothai/unsloth.git&quot;

pip install --no-deps trl peft accelerate bitsandbytes" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">点安装</font></font></h3><a id="user-content-pip-installation" class="anchor" aria-label="永久链接：Pip 安装" href="#pip-installation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您有 Anaconda，请勿使用此</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">你必须使用 Conda 安装方法，否则东西会崩溃。</font></font></p>
<ol dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过以下方式查找您的 CUDA 版本</font></font></li>
</ol>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto"><pre><span class="pl-k">import</span> <span class="pl-s1">torch</span>; <span class="pl-s1">torch</span>.<span class="pl-s1">version</span>.<span class="pl-s1">cuda</span></pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="import torch; torch.version.cuda" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<ol start="2" dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于 Pytorch 2.1.0：您可以通过 Pip 更新 Pytorch（交换</font></font><code>cu121</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>cu118</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。请访问</font></font><a href="https://pytorch.org/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://pytorch.org/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了解更多信息。选择</font></font><code>cu118</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CUDA 11.8 或</font></font><code>cu121</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CUDA 12.1。如果您有 RTX 3060 或更高版本（A100、H100 等），请使用该</font></font><code>"ampere"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">路径。对于 Pytorch 2.1.1：转到步骤 3。对于 Pytorch 2.2.0：转到步骤 4。</font></font></li>
</ol>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto"><pre>pip install --upgrade --force-reinstall --no-cache-dir torch==2.1.0 triton \
  --index-url https://download.pytorch.org/whl/cu121</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="pip install --upgrade --force-reinstall --no-cache-dir torch==2.1.0 triton \
  --index-url https://download.pytorch.org/whl/cu121" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto"><pre>pip install <span class="pl-s"><span class="pl-pds">"</span>unsloth[cu118] @ git+https://github.com/unslothai/unsloth.git<span class="pl-pds">"</span></span>
pip install <span class="pl-s"><span class="pl-pds">"</span>unsloth[cu121] @ git+https://github.com/unslothai/unsloth.git<span class="pl-pds">"</span></span>
pip install <span class="pl-s"><span class="pl-pds">"</span>unsloth[cu118-ampere] @ git+https://github.com/unslothai/unsloth.git<span class="pl-pds">"</span></span>
pip install <span class="pl-s"><span class="pl-pds">"</span>unsloth[cu121-ampere] @ git+https://github.com/unslothai/unsloth.git<span class="pl-pds">"</span></span></pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="pip install &quot;unsloth[cu118] @ git+https://github.com/unslothai/unsloth.git&quot;
pip install &quot;unsloth[cu121] @ git+https://github.com/unslothai/unsloth.git&quot;
pip install &quot;unsloth[cu118-ampere] @ git+https://github.com/unslothai/unsloth.git&quot;
pip install &quot;unsloth[cu121-ampere] @ git+https://github.com/unslothai/unsloth.git&quot;" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<ol start="3" dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于 Pytorch 2.1.1：使用</font></font><code>"ampere"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">较新的 RTX 30xx GPU 或更高版本的路径。</font></font></li>
</ol>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto"><pre>pip install --upgrade --force-reinstall --no-cache-dir torch==2.1.1 triton \
  --index-url https://download.pytorch.org/whl/cu121</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="pip install --upgrade --force-reinstall --no-cache-dir torch==2.1.1 triton \
  --index-url https://download.pytorch.org/whl/cu121" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto"><pre>pip install <span class="pl-s"><span class="pl-pds">"</span>unsloth[cu118-torch211] @ git+https://github.com/unslothai/unsloth.git<span class="pl-pds">"</span></span>
pip install <span class="pl-s"><span class="pl-pds">"</span>unsloth[cu121-torch211] @ git+https://github.com/unslothai/unsloth.git<span class="pl-pds">"</span></span>
pip install <span class="pl-s"><span class="pl-pds">"</span>unsloth[cu118-ampere-torch211] @ git+https://github.com/unslothai/unsloth.git<span class="pl-pds">"</span></span>
pip install <span class="pl-s"><span class="pl-pds">"</span>unsloth[cu121-ampere-torch211] @ git+https://github.com/unslothai/unsloth.git<span class="pl-pds">"</span></span></pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="pip install &quot;unsloth[cu118-torch211] @ git+https://github.com/unslothai/unsloth.git&quot;
pip install &quot;unsloth[cu121-torch211] @ git+https://github.com/unslothai/unsloth.git&quot;
pip install &quot;unsloth[cu118-ampere-torch211] @ git+https://github.com/unslothai/unsloth.git&quot;
pip install &quot;unsloth[cu121-ampere-torch211] @ git+https://github.com/unslothai/unsloth.git&quot;" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<ol start="4" dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于 Pytorch 2.2.0：使用</font></font><code>"ampere"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">较新的 RTX 30xx GPU 或更高版本的路径。</font></font></li>
</ol>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto"><pre>pip install --upgrade --force-reinstall --no-cache-dir torch==2.2.0 triton \
  --index-url https://download.pytorch.org/whl/cu121</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="pip install --upgrade --force-reinstall --no-cache-dir torch==2.2.0 triton \
  --index-url https://download.pytorch.org/whl/cu121" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto"><pre>pip install <span class="pl-s"><span class="pl-pds">"</span>unsloth[cu118-torch220] @ git+https://github.com/unslothai/unsloth.git<span class="pl-pds">"</span></span>
pip install <span class="pl-s"><span class="pl-pds">"</span>unsloth[cu121-torch220] @ git+https://github.com/unslothai/unsloth.git<span class="pl-pds">"</span></span>
pip install <span class="pl-s"><span class="pl-pds">"</span>unsloth[cu118-ampere-torch220] @ git+https://github.com/unslothai/unsloth.git<span class="pl-pds">"</span></span>
pip install <span class="pl-s"><span class="pl-pds">"</span>unsloth[cu121-ampere-torch220] @ git+https://github.com/unslothai/unsloth.git<span class="pl-pds">"</span></span></pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="pip install &quot;unsloth[cu118-torch220] @ git+https://github.com/unslothai/unsloth.git&quot;
pip install &quot;unsloth[cu121-torch220] @ git+https://github.com/unslothai/unsloth.git&quot;
pip install &quot;unsloth[cu118-ampere-torch220] @ git+https://github.com/unslothai/unsloth.git&quot;
pip install &quot;unsloth[cu121-ampere-torch220] @ git+https://github.com/unslothai/unsloth.git&quot;" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<ol start="5" dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果出现错误，请先尝试以下操作，然后返回步骤 1：</font></font></li>
</ol>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto"><pre>pip install --upgrade pip</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="pip install --upgrade pip" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<ol start="6" dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于 Pytorch 2.2.1：</font></font></li>
</ol>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto"><pre><span class="pl-c"><span class="pl-c">#</span> RTX 3090, 4090 Ampere GPUs:</span>
pip install <span class="pl-s"><span class="pl-pds">"</span>unsloth[colab-new] @ git+https://github.com/unslothai/unsloth.git<span class="pl-pds">"</span></span>
pip install --no-deps packaging ninja einops flash-attn xformers trl peft accelerate bitsandbytes

<span class="pl-c"><span class="pl-c">#</span> Pre Ampere RTX 2080, T4, GTX 1080 GPUs:</span>
pip install <span class="pl-s"><span class="pl-pds">"</span>unsloth[colab-new] @ git+https://github.com/unslothai/unsloth.git<span class="pl-pds">"</span></span>
pip install --no-deps xformers trl peft accelerate bitsandbytes</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="# RTX 3090, 4090 Ampere GPUs:
pip install &quot;unsloth[colab-new] @ git+https://github.com/unslothai/unsloth.git&quot;
pip install --no-deps packaging ninja einops flash-attn xformers trl peft accelerate bitsandbytes

# Pre Ampere RTX 2080, T4, GTX 1080 GPUs:
pip install &quot;unsloth[colab-new] @ git+https://github.com/unslothai/unsloth.git&quot;
pip install --no-deps xformers trl peft accelerate bitsandbytes" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<ol start="7" dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要解决安装问题，请尝试以下操作（全部必须成功）。 Xformers 应该大部分都可用。</font></font></li>
</ol>
<div class="highlight highlight-source-shell notranslate position-relative overflow-auto" dir="auto"><pre>nvcc
python -m xformers.info
python -m bitsandbytes</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="nvcc
python -m xformers.info
python -m bitsandbytes" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">📜 文档</font></font></h2><a id="user-content--documentation" class="anchor" aria-label="永久链接：📜 文档" href="#-documentation"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请访问我们的</font></font><a href="https://github.com/unslothai/unsloth/wiki"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wiki 页面</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，了解保存到 GGUF、检查点、评估等内容！</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们支持 Huggingface 的 TRL、Trainer、Seq2SeqTrainer 甚至 Pytorch 代码！</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们在🤗Hugging Face 的官方文档中！查看</font></font><a href="https://huggingface.co/docs/trl/main/en/sft_trainer#accelerate-fine-tuning-2x-using-unsloth" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SFT 文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://huggingface.co/docs/trl/main/en/dpo_trainer#accelerate-dpo-fine-tuning-using-unsloth" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DPO 文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">！</font></font></li>
</ul>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto"><pre><span class="pl-k">from</span> <span class="pl-s1">unsloth</span> <span class="pl-k">import</span> <span class="pl-v">FastLanguageModel</span>
<span class="pl-k">import</span> <span class="pl-s1">torch</span>
<span class="pl-k">from</span> <span class="pl-s1">trl</span> <span class="pl-k">import</span> <span class="pl-v">SFTTrainer</span>
<span class="pl-k">from</span> <span class="pl-s1">transformers</span> <span class="pl-k">import</span> <span class="pl-v">TrainingArguments</span>
<span class="pl-k">from</span> <span class="pl-s1">datasets</span> <span class="pl-k">import</span> <span class="pl-s1">load_dataset</span>
<span class="pl-s1">max_seq_length</span> <span class="pl-c1">=</span> <span class="pl-c1">2048</span> <span class="pl-c"># Supports RoPE Scaling interally, so choose any!</span>
<span class="pl-c"># Get LAION dataset</span>
<span class="pl-s1">url</span> <span class="pl-c1">=</span> <span class="pl-s">"https://huggingface.co/datasets/laion/OIG/resolve/main/unified_chip2.jsonl"</span>
<span class="pl-s1">dataset</span> <span class="pl-c1">=</span> <span class="pl-en">load_dataset</span>(<span class="pl-s">"json"</span>, <span class="pl-s1">data_files</span> <span class="pl-c1">=</span> {<span class="pl-s">"train"</span> : <span class="pl-s1">url</span>}, <span class="pl-s1">split</span> <span class="pl-c1">=</span> <span class="pl-s">"train"</span>)

<span class="pl-c"># 4bit pre quantized models we support - 4x faster downloading!</span>
<span class="pl-s1">fourbit_models</span> <span class="pl-c1">=</span> [
    <span class="pl-s">"unsloth/mistral-7b-bnb-4bit"</span>,
    <span class="pl-s">"unsloth/llama-2-7b-bnb-4bit"</span>,
    <span class="pl-s">"unsloth/llama-2-13b-bnb-4bit"</span>,
    <span class="pl-s">"unsloth/codellama-34b-bnb-4bit"</span>,
    <span class="pl-s">"unsloth/tinyllama-bnb-4bit"</span>,
] <span class="pl-c"># Go to https://huggingface.co/unsloth for more 4-bit models!</span>

<span class="pl-c"># Load Llama model</span>
<span class="pl-s1">model</span>, <span class="pl-s1">tokenizer</span> <span class="pl-c1">=</span> <span class="pl-v">FastLanguageModel</span>.<span class="pl-en">from_pretrained</span>(
    <span class="pl-s1">model_name</span> <span class="pl-c1">=</span> <span class="pl-s">"unsloth/mistral-7b-bnb-4bit"</span>, <span class="pl-c"># Supports Llama, Mistral - replace this!</span>
    <span class="pl-s1">max_seq_length</span> <span class="pl-c1">=</span> <span class="pl-s1">max_seq_length</span>,
    <span class="pl-s1">dtype</span> <span class="pl-c1">=</span> <span class="pl-c1">None</span>,
    <span class="pl-s1">load_in_4bit</span> <span class="pl-c1">=</span> <span class="pl-c1">True</span>,
)

<span class="pl-c"># Do model patching and add fast LoRA weights</span>
<span class="pl-s1">model</span> <span class="pl-c1">=</span> <span class="pl-v">FastLanguageModel</span>.<span class="pl-en">get_peft_model</span>(
    <span class="pl-s1">model</span>,
    <span class="pl-s1">r</span> <span class="pl-c1">=</span> <span class="pl-c1">16</span>,
    <span class="pl-s1">target_modules</span> <span class="pl-c1">=</span> [<span class="pl-s">"q_proj"</span>, <span class="pl-s">"k_proj"</span>, <span class="pl-s">"v_proj"</span>, <span class="pl-s">"o_proj"</span>,
                      <span class="pl-s">"gate_proj"</span>, <span class="pl-s">"up_proj"</span>, <span class="pl-s">"down_proj"</span>,],
    <span class="pl-s1">lora_alpha</span> <span class="pl-c1">=</span> <span class="pl-c1">16</span>,
    <span class="pl-s1">lora_dropout</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>, <span class="pl-c"># Supports any, but = 0 is optimized</span>
    <span class="pl-s1">bias</span> <span class="pl-c1">=</span> <span class="pl-s">"none"</span>,    <span class="pl-c"># Supports any, but = "none" is optimized</span>
    <span class="pl-s1">use_gradient_checkpointing</span> <span class="pl-c1">=</span> <span class="pl-c1">True</span>,
    <span class="pl-s1">random_state</span> <span class="pl-c1">=</span> <span class="pl-c1">3407</span>,
    <span class="pl-s1">max_seq_length</span> <span class="pl-c1">=</span> <span class="pl-s1">max_seq_length</span>,
    <span class="pl-s1">use_rslora</span> <span class="pl-c1">=</span> <span class="pl-c1">False</span>,  <span class="pl-c"># We support rank stabilized LoRA</span>
    <span class="pl-s1">loftq_config</span> <span class="pl-c1">=</span> <span class="pl-c1">None</span>, <span class="pl-c"># And LoftQ</span>
)

<span class="pl-s1">trainer</span> <span class="pl-c1">=</span> <span class="pl-v">SFTTrainer</span>(
    <span class="pl-s1">model</span> <span class="pl-c1">=</span> <span class="pl-s1">model</span>,
    <span class="pl-s1">train_dataset</span> <span class="pl-c1">=</span> <span class="pl-s1">dataset</span>,
    <span class="pl-s1">dataset_text_field</span> <span class="pl-c1">=</span> <span class="pl-s">"text"</span>,
    <span class="pl-s1">max_seq_length</span> <span class="pl-c1">=</span> <span class="pl-s1">max_seq_length</span>,
    <span class="pl-s1">tokenizer</span> <span class="pl-c1">=</span> <span class="pl-s1">tokenizer</span>,
    <span class="pl-s1">args</span> <span class="pl-c1">=</span> <span class="pl-v">TrainingArguments</span>(
        <span class="pl-s1">per_device_train_batch_size</span> <span class="pl-c1">=</span> <span class="pl-c1">2</span>,
        <span class="pl-s1">gradient_accumulation_steps</span> <span class="pl-c1">=</span> <span class="pl-c1">4</span>,
        <span class="pl-s1">warmup_steps</span> <span class="pl-c1">=</span> <span class="pl-c1">10</span>,
        <span class="pl-s1">max_steps</span> <span class="pl-c1">=</span> <span class="pl-c1">60</span>,
        <span class="pl-s1">fp16</span> <span class="pl-c1">=</span> <span class="pl-c1">not</span> <span class="pl-s1">torch</span>.<span class="pl-s1">cuda</span>.<span class="pl-en">is_bf16_supported</span>(),
        <span class="pl-s1">bf16</span> <span class="pl-c1">=</span> <span class="pl-s1">torch</span>.<span class="pl-s1">cuda</span>.<span class="pl-en">is_bf16_supported</span>(),
        <span class="pl-s1">logging_steps</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span>,
        <span class="pl-s1">output_dir</span> <span class="pl-c1">=</span> <span class="pl-s">"outputs"</span>,
        <span class="pl-s1">optim</span> <span class="pl-c1">=</span> <span class="pl-s">"adamw_8bit"</span>,
        <span class="pl-s1">seed</span> <span class="pl-c1">=</span> <span class="pl-c1">3407</span>,
    ),
)
<span class="pl-s1">trainer</span>.<span class="pl-en">train</span>()

<span class="pl-c"># Go to https://github.com/unslothai/unsloth/wiki for advanced tips like</span>
<span class="pl-c"># (1) Saving to GGUF / merging to 16bit for vLLM</span>
<span class="pl-c"># (2) Continued training from a saved LoRA adapter</span>
<span class="pl-c"># (3) Adding an evaluation loop / OOMs</span>
<span class="pl-c"># (4) Cutomized chat templates</span></pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="from unsloth import FastLanguageModel
import torch
from trl import SFTTrainer
from transformers import TrainingArguments
from datasets import load_dataset
max_seq_length = 2048 # Supports RoPE Scaling interally, so choose any!
# Get LAION dataset
url = &quot;https://huggingface.co/datasets/laion/OIG/resolve/main/unified_chip2.jsonl&quot;
dataset = load_dataset(&quot;json&quot;, data_files = {&quot;train&quot; : url}, split = &quot;train&quot;)

# 4bit pre quantized models we support - 4x faster downloading!
fourbit_models = [
    &quot;unsloth/mistral-7b-bnb-4bit&quot;,
    &quot;unsloth/llama-2-7b-bnb-4bit&quot;,
    &quot;unsloth/llama-2-13b-bnb-4bit&quot;,
    &quot;unsloth/codellama-34b-bnb-4bit&quot;,
    &quot;unsloth/tinyllama-bnb-4bit&quot;,
] # Go to https://huggingface.co/unsloth for more 4-bit models!

# Load Llama model
model, tokenizer = FastLanguageModel.from_pretrained(
    model_name = &quot;unsloth/mistral-7b-bnb-4bit&quot;, # Supports Llama, Mistral - replace this!
    max_seq_length = max_seq_length,
    dtype = None,
    load_in_4bit = True,
)

# Do model patching and add fast LoRA weights
model = FastLanguageModel.get_peft_model(
    model,
    r = 16,
    target_modules = [&quot;q_proj&quot;, &quot;k_proj&quot;, &quot;v_proj&quot;, &quot;o_proj&quot;,
                      &quot;gate_proj&quot;, &quot;up_proj&quot;, &quot;down_proj&quot;,],
    lora_alpha = 16,
    lora_dropout = 0, # Supports any, but = 0 is optimized
    bias = &quot;none&quot;,    # Supports any, but = &quot;none&quot; is optimized
    use_gradient_checkpointing = True,
    random_state = 3407,
    max_seq_length = max_seq_length,
    use_rslora = False,  # We support rank stabilized LoRA
    loftq_config = None, # And LoftQ
)

trainer = SFTTrainer(
    model = model,
    train_dataset = dataset,
    dataset_text_field = &quot;text&quot;,
    max_seq_length = max_seq_length,
    tokenizer = tokenizer,
    args = TrainingArguments(
        per_device_train_batch_size = 2,
        gradient_accumulation_steps = 4,
        warmup_steps = 10,
        max_steps = 60,
        fp16 = not torch.cuda.is_bf16_supported(),
        bf16 = torch.cuda.is_bf16_supported(),
        logging_steps = 1,
        output_dir = &quot;outputs&quot;,
        optim = &quot;adamw_8bit&quot;,
        seed = 3407,
    ),
)
trainer.train()

# Go to https://github.com/unslothai/unsloth/wiki for advanced tips like
# (1) Saving to GGUF / merging to 16bit for vLLM
# (2) Continued training from a saved LoRA adapter
# (3) Adding an evaluation loop / OOMs
# (4) Cutomized chat templates" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<p dir="auto"><a name="user-content-dpo"></a></p>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DPO 支持</font></font></h2><a id="user-content-dpo-support" class="anchor" aria-label="永久链接：DPO 支持" href="#dpo-support"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DPO（直接偏好优化）、PPO、奖励建模似乎都按照</font></font><a href="https://github.com/hiyouga/LLaMA-Factory"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Llama-Factory</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的第 3 方独立测试工作。我们有一个初步的 Google Colab 笔记本，用于在 Tesla T4 上复制 Zephyr：</font></font><a href="https://colab.research.google.com/drive/15vttTpzzVXv_tJwEk-hIcQ0S9FcEWvwP?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">笔记本</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们在🤗Hugging Face 的官方文档中！我们正在查看</font></font><a href="https://huggingface.co/docs/trl/main/en/sft_trainer#accelerate-fine-tuning-2x-using-unsloth" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SFT 文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://huggingface.co/docs/trl/main/en/dpo_trainer#accelerate-dpo-fine-tuning-using-unsloth" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DPO 文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">！</font></font></p>
<div class="highlight highlight-source-python notranslate position-relative overflow-auto" dir="auto"><pre><span class="pl-k">from</span> <span class="pl-s1">unsloth</span> <span class="pl-k">import</span> <span class="pl-v">FastLanguageModel</span>, <span class="pl-v">PatchDPOTrainer</span>
<span class="pl-v">PatchDPOTrainer</span>()
<span class="pl-k">import</span> <span class="pl-s1">torch</span>
<span class="pl-k">from</span> <span class="pl-s1">transformers</span> <span class="pl-k">import</span> <span class="pl-v">TrainingArguments</span>
<span class="pl-k">from</span> <span class="pl-s1">trl</span> <span class="pl-k">import</span> <span class="pl-v">DPOTrainer</span>

<span class="pl-s1">model</span>, <span class="pl-s1">tokenizer</span> <span class="pl-c1">=</span> <span class="pl-v">FastLanguageModel</span>.<span class="pl-en">from_pretrained</span>(
    <span class="pl-s1">model_name</span> <span class="pl-c1">=</span> <span class="pl-s">"unsloth/zephyr-sft-bnb-4bit"</span>,
    <span class="pl-s1">max_seq_length</span> <span class="pl-c1">=</span> <span class="pl-s1">max_seq_length</span>,
    <span class="pl-s1">dtype</span> <span class="pl-c1">=</span> <span class="pl-c1">None</span>,
    <span class="pl-s1">load_in_4bit</span> <span class="pl-c1">=</span> <span class="pl-c1">True</span>,
)

<span class="pl-c"># Do model patching and add fast LoRA weights</span>
<span class="pl-s1">model</span> <span class="pl-c1">=</span> <span class="pl-v">FastLanguageModel</span>.<span class="pl-en">get_peft_model</span>(
    <span class="pl-s1">model</span>,
    <span class="pl-s1">r</span> <span class="pl-c1">=</span> <span class="pl-c1">64</span>,
    <span class="pl-s1">target_modules</span> <span class="pl-c1">=</span> [<span class="pl-s">"q_proj"</span>, <span class="pl-s">"k_proj"</span>, <span class="pl-s">"v_proj"</span>, <span class="pl-s">"o_proj"</span>,
                      <span class="pl-s">"gate_proj"</span>, <span class="pl-s">"up_proj"</span>, <span class="pl-s">"down_proj"</span>,],
    <span class="pl-s1">lora_alpha</span> <span class="pl-c1">=</span> <span class="pl-c1">64</span>,
    <span class="pl-s1">lora_dropout</span> <span class="pl-c1">=</span> <span class="pl-c1">0</span>, <span class="pl-c"># Supports any, but = 0 is optimized</span>
    <span class="pl-s1">bias</span> <span class="pl-c1">=</span> <span class="pl-s">"none"</span>,    <span class="pl-c"># Supports any, but = "none" is optimized</span>
    <span class="pl-s1">use_gradient_checkpointing</span> <span class="pl-c1">=</span> <span class="pl-c1">True</span>,
    <span class="pl-s1">random_state</span> <span class="pl-c1">=</span> <span class="pl-c1">3407</span>,
    <span class="pl-s1">max_seq_length</span> <span class="pl-c1">=</span> <span class="pl-s1">max_seq_length</span>,
)

<span class="pl-s1">dpo_trainer</span> <span class="pl-c1">=</span> <span class="pl-v">DPOTrainer</span>(
    <span class="pl-s1">model</span> <span class="pl-c1">=</span> <span class="pl-s1">model</span>,
    <span class="pl-s1">ref_model</span> <span class="pl-c1">=</span> <span class="pl-c1">None</span>,
    <span class="pl-s1">args</span> <span class="pl-c1">=</span> <span class="pl-v">TrainingArguments</span>(
        <span class="pl-s1">per_device_train_batch_size</span> <span class="pl-c1">=</span> <span class="pl-c1">4</span>,
        <span class="pl-s1">gradient_accumulation_steps</span> <span class="pl-c1">=</span> <span class="pl-c1">8</span>,
        <span class="pl-s1">warmup_ratio</span> <span class="pl-c1">=</span> <span class="pl-c1">0.1</span>,
        <span class="pl-s1">num_train_epochs</span> <span class="pl-c1">=</span> <span class="pl-c1">3</span>,
        <span class="pl-s1">fp16</span> <span class="pl-c1">=</span> <span class="pl-c1">not</span> <span class="pl-s1">torch</span>.<span class="pl-s1">cuda</span>.<span class="pl-en">is_bf16_supported</span>(),
        <span class="pl-s1">bf16</span> <span class="pl-c1">=</span> <span class="pl-s1">torch</span>.<span class="pl-s1">cuda</span>.<span class="pl-en">is_bf16_supported</span>(),
        <span class="pl-s1">logging_steps</span> <span class="pl-c1">=</span> <span class="pl-c1">1</span>,
        <span class="pl-s1">optim</span> <span class="pl-c1">=</span> <span class="pl-s">"adamw_8bit"</span>,
        <span class="pl-s1">seed</span> <span class="pl-c1">=</span> <span class="pl-c1">42</span>,
        <span class="pl-s1">output_dir</span> <span class="pl-c1">=</span> <span class="pl-s">"outputs"</span>,
    ),
    <span class="pl-s1">beta</span> <span class="pl-c1">=</span> <span class="pl-c1">0.1</span>,
    <span class="pl-s1">train_dataset</span> <span class="pl-c1">=</span> <span class="pl-v">YOUR_DATASET_HERE</span>,
    <span class="pl-c"># eval_dataset = YOUR_DATASET_HERE,</span>
    <span class="pl-s1">tokenizer</span> <span class="pl-c1">=</span> <span class="pl-s1">tokenizer</span>,
    <span class="pl-s1">max_length</span> <span class="pl-c1">=</span> <span class="pl-c1">1024</span>,
    <span class="pl-s1">max_prompt_length</span> <span class="pl-c1">=</span> <span class="pl-c1">512</span>,
)
<span class="pl-s1">dpo_trainer</span>.<span class="pl-en">train</span>()</pre><div class="zeroclipboard-container">
    <clipboard-copy aria-label="Copy" class="ClipboardButton btn btn-invisible js-clipboard-copy m-2 p-0 tooltipped-no-delay d-flex flex-justify-center flex-items-center" data-copy-feedback="Copied!" data-tooltip-direction="w" value="from unsloth import FastLanguageModel, PatchDPOTrainer
PatchDPOTrainer()
import torch
from transformers import TrainingArguments
from trl import DPOTrainer

model, tokenizer = FastLanguageModel.from_pretrained(
    model_name = &quot;unsloth/zephyr-sft-bnb-4bit&quot;,
    max_seq_length = max_seq_length,
    dtype = None,
    load_in_4bit = True,
)

# Do model patching and add fast LoRA weights
model = FastLanguageModel.get_peft_model(
    model,
    r = 64,
    target_modules = [&quot;q_proj&quot;, &quot;k_proj&quot;, &quot;v_proj&quot;, &quot;o_proj&quot;,
                      &quot;gate_proj&quot;, &quot;up_proj&quot;, &quot;down_proj&quot;,],
    lora_alpha = 64,
    lora_dropout = 0, # Supports any, but = 0 is optimized
    bias = &quot;none&quot;,    # Supports any, but = &quot;none&quot; is optimized
    use_gradient_checkpointing = True,
    random_state = 3407,
    max_seq_length = max_seq_length,
)

dpo_trainer = DPOTrainer(
    model = model,
    ref_model = None,
    args = TrainingArguments(
        per_device_train_batch_size = 4,
        gradient_accumulation_steps = 8,
        warmup_ratio = 0.1,
        num_train_epochs = 3,
        fp16 = not torch.cuda.is_bf16_supported(),
        bf16 = torch.cuda.is_bf16_supported(),
        logging_steps = 1,
        optim = &quot;adamw_8bit&quot;,
        seed = 42,
        output_dir = &quot;outputs&quot;,
    ),
    beta = 0.1,
    train_dataset = YOUR_DATASET_HERE,
    # eval_dataset = YOUR_DATASET_HERE,
    tokenizer = tokenizer,
    max_length = 1024,
    max_prompt_length = 512,
)
dpo_trainer.train()" tabindex="0" role="button">
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-copy js-clipboard-copy-icon">
    <path d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z"></path><path d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z"></path>
</svg>
      <svg aria-hidden="true" height="16" viewBox="0 0 16 16" version="1.1" width="16" data-view-component="true" class="octicon octicon-check js-clipboard-check-icon color-fg-success d-none">
    <path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"></path>
</svg>
    </clipboard-copy>
  </div></div>
<div class="markdown-heading" dir="auto"><h2 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">🥇 详细的基准测试表</font></font></h2><a id="user-content--detailed-benchmarking-tables" class="anchor" aria-label="永久链接：🥇 详细基准测试表" href="#-detailed-benchmarking-tables"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击“代码”以获得完全可重现的示例</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">“Unsloth Equal”是我们 PRO 版本的预览版，其中删除了代码。所有设置和损失曲线保持相同。</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关基准测试表的完整列表，</font></font><a href="https://unsloth.ai/blog/mistral-benchmark#Benchmark%20tables" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请访问我们的网站</font></font></a></li>
</ul>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 个 A100 40GB</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">🤗抱脸</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">闪光注意2</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">🦥不懒惰开放</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰平等</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解除懒惰专业版</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰麦克斯</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">羊驼毛</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1x</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.04倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.98倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.48倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.32倍</font></font></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15.64倍</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></td>
<td><a href="https://colab.research.google.com/drive/1u4dBeM-0vGNVmmO6X7cScAut-Hyt4KDF?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></a></td>
<td><a href="https://colab.research.google.com/drive/1fgTOxpMbVjloQBvZyz4lF4BacKSZOB2A?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></a></td>
<td><a href="https://colab.research.google.com/drive/1YIPY_18xm-K0iJDgvNkRoJsgkPMPAO3G?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></a></td>
<td><a href="https://colab.research.google.com/drive/1ANW8EFL3LVyTD7Gq4TkheC1Z7Rxw-rHp?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></a></td>
<td></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">秒</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1040</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1001</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第525章</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第419章</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">196</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">67</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内存MB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18235</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15365</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9631</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8525</font></font></td>
<td></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存百分比</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">15.74</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">47.18</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">53.25</font></font></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Llama-Factory 第三方基准测试</font></font></h3><a id="user-content-llama-factory-3rd-party-benchmarking" class="anchor" aria-label="永久链接：Llama-Factory 第 3 方基准测试" href="#llama-factory-3rd-party-benchmarking"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><a href="https://github.com/hiyouga/LLaMA-Factory/wiki/Performance-Comparison"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">链接到性能表。</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> TGS：每 GPU 每秒的令牌数。型号：LLaMA2-7B。 GPU：NVIDIA A100 * 1。批量大小：4。梯度累积：2。LoRA 等级：8。最大长度：1024。</font></font></li>
</ul>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">位</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TGS</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">公克</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">速度</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高频</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2392</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">18GB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">100%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高频+FA2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2954</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">17GB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">123%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰+FA2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4007</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16 GB</font></font></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">168%</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">高频</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2415</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9GB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">101%</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰+FA2</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3726</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7GB</font></font></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">160%</font></font></strong></td>
</tr>
</tbody>
</table>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">流行型号之间的性能比较</font></font></h3><a id="user-content-performance-comparisons-between-popular-models" class="anchor" aria-label="永久链接：流行模型之间的性能比较" href="#performance-comparisons-between-popular-models"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<details>
  <summary><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击查看特定型号基准测试表（Mistral 7b、CodeLlama 34b 等）</font></font></summary>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">米斯特拉尔7b</font></font></h3><a id="user-content-mistral-7b" class="anchor" aria-label="永久链接：米斯特拉尔 7b" href="#mistral-7b"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 个 A100 40GB</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">抱脸</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">闪光注意2</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰开放</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰平等</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解除懒惰专业版</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰麦克斯</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">米斯特拉尔 7B 超薄逆戟鲸</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1x</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.15倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.15倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.53倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.61倍</font></font></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.69倍</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></td>
<td><a href="https://colab.research.google.com/drive/1mePk3KzwTD81hr5mcNcs_AX3Kbg_Ha0x?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></a></td>
<td><a href="https://colab.research.google.com/drive/1dgHxjvTmX6hb0bPcLp26RXSE6_n9DKj7?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></a></td>
<td><a href="https://colab.research.google.com/drive/1SKrKGV-BZoU4kv5q3g0jtE_OhRgPtrrQ?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></a></td>
<td><a href="https://colab.research.google.com/drive/18yOiyX0T81mTwZqOALFSCX_tSAqju6aD?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></a></td>
<td></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">秒</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1813</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第1571章</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第842章</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">718</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第393章</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">132</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内存MB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">32853</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">19385</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12465</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10271</font></font></td>
<td></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存百分比</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">40.99</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">62.06</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">68.74</font></font></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码骆马 34b</font></font></h3><a id="user-content-codellama-34b" class="anchor" aria-label="永久链接：CodeLlama 34b" href="#codellama-34b"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 个 A100 40GB</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">抱脸</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">闪光注意2</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰开放</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰平等</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解除懒惰专业版</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰麦克斯</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码骆驼 34B</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OOM❌</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.99倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.87倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.61倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.27倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.82倍</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></td>
<td><a href="https://colab.research.google.com/drive/1ykfz3BqrtC_AUFegCzUQjjfUNlxp6Otc?usp=sharing" rel="nofollow"><g-emoji class="g-emoji" alias="arrow_forward"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▶️</font></font></g-emoji><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></a></td>
<td><a href="https://colab.research.google.com/drive/12ZypxQh7OC6kBXvWZI-5d05I4m-B_hoR?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></a></td>
<td><a href="https://colab.research.google.com/drive/1gdHyAx8XJsz2yNV-DHvbHjR1iCef5Qmh?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></a></td>
<td><a href="https://colab.research.google.com/drive/1fm7wqx9MJ0kRrwKOfmLkK1Rmw-pySahB?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></a></td>
<td></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">秒</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1953年</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1982年</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1043</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第748章</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第458章</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">152</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内存MB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">40000</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">33217</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">27413</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">22161</font></font></td>
<td></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存百分比</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">16.96</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">31.47</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">44.60</font></font></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 特斯拉 T4</font></font></h3><a id="user-content-1-tesla-t4" class="anchor" aria-label="永久链接：1 特斯拉 T4" href="#1-tesla-t4"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1个T4 16GB</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">抱脸</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">闪光注意</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰开放</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unsloth Pro 平等</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解除懒惰专业版</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰麦克斯</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">羊驼毛</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1x</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.09倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.69倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.79倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.93倍</font></font></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.3倍</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></td>
<td><a href="https://colab.research.google.com/drive/1XpLIV4s8Bj5uryB-X2gqM88oRGHEGdaB?usp=sharing" rel="nofollow"><g-emoji class="g-emoji" alias="arrow_forward"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▶️</font></font></g-emoji><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></a></td>
<td><a href="https://colab.research.google.com/drive/1LyXu6CjuymQg6ddHX8g1dpUvrMa1nn4L?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></a></td>
<td><a href="https://colab.research.google.com/drive/1gsv4LpY7C32otl1rgRo5wXTk4HIitXoM?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></a></td>
<td><a href="https://colab.research.google.com/drive/1VtULwRQwhEnVdNryjm27zXfdSM1tNfFK?usp=sharing" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></a></td>
<td></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">秒</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1599</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第1468章</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第942章</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第894章</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第545章</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">193</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内存MB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7199</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7059</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6459</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5443</font></font></td>
<td></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存百分比</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.94</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.28</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.39</font></font></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 辆特斯拉 T4（通过 DDP）</font></font></h3><a id="user-content-2-tesla-t4s-via-ddp" class="anchor" aria-label="永久链接：通过 DDP 购买 2 辆 Tesla T4" href="#2-tesla-t4s-via-ddp"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 T4 顺铂</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">抱脸</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">闪光注意</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰开放</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰平等</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解除懒惰专业版</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰麦克斯</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">羊驼毛</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1x</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.99倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.95倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.44倍</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.28倍</font></font></td>
<td><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">20.61倍</font></font></strong></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></td>
<td><a href="https://www.kaggle.com/danielhanchen/hf-original-alpaca-t4-ddp" rel="nofollow"><g-emoji class="g-emoji" alias="arrow_forward"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">▶️</font></font></g-emoji><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></a></td>
<td><a href="https://www.kaggle.com/danielhanchen/hf-sdpa-alpaca-t4-ddp" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></a></td>
<td><a href="https://www.kaggle.com/danielhanchen/unsloth-alpaca-t4-ddp" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代码</font></font></a></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">秒</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9882</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9946</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1996年</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2227</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第1357章</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第480章</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内存MB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9176</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9128</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6904</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6782</font></font></td>
<td></td>
<td></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存百分比</font></font></td>
<td></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0.52</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">24.76</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">26.09</font></font></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</details>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 Tesla T4 GPU 上的性能比较：</font></font></h3><a id="user-content-performance-comparisons-on-1-tesla-t4-gpu" class="anchor" aria-label="永久链接：1 个 Tesla T4 GPU 上的性能比较：" href="#performance-comparisons-on-1-tesla-t4-gpu"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<details>
  <summary><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击查看 1 epoch 所用时间</font></font></summary>
<p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google Colab 上的一辆 Tesla T4
</font></font><code>bsz = 2, ga = 4, max_grad_norm = 0.3, num_train_epochs = 1, seed = 3047, lr = 2e-4, wd = 0.01, optim = "adamw_8bit", schedule = "linear", schedule_steps = 10</code></p>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图形处理器</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">羊驼毛 (52K)</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">莱昂 OIG (210K)</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开助手 (10K)</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SlimOrca (518K)</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">抱脸</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1个T4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">23小时15米</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">56小时28米</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8小时38米</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">391小时41米</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰开放</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1个T4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13小时7米（1.8倍）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">31小时47米（1.8倍）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4小时27米（1.9倍）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">240小时4米（1.6倍）</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解除懒惰专业版</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1个T4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3小时6米（7.5倍）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5小时17米（10.7倍）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1小时7米（7.7倍）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">59小时53米（6.5倍）</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰麦克斯</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1个T4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2小时39m（8.8倍）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4小时31m（12.5倍）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">0小时58m（8.9倍）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">51小时30米（7.6倍）</font></font></td>
</tr>
</tbody>
</table>
<p dir="auto"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内存使用峰值</font></font></strong></p>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图形处理器</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">羊驼毛 (52K)</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">莱昂 OIG (210K)</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开助手 (10K)</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SlimOrca (518K)</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">抱脸</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1个T4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.3GB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.9GB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.0GB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">13.3GB</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰开放</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1个T4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.8GB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.7GB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.8GB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.7GB</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解除懒惰专业版</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1个T4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.4GB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.4GB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.4GB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.4GB</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰麦克斯</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1个T4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.4GB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12.4GB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">11.9GB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.4GB</font></font></td>
</tr>
</tbody>
</table>
</details>
<details>
  <summary><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单击通过 DDP 在 2 个 Tesla T4 GPU 上进行性能比较：</font></font></summary><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
**1 epoch 所花费的时间**
</font></font><p dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kaggle 上的两辆特斯拉 T4
</font></font><code>bsz = 2, ga = 4, max_grad_norm = 0.3, num_train_epochs = 1, seed = 3047, lr = 2e-4, wd = 0.01, optim = "adamw_8bit", schedule = "linear", schedule_steps = 10</code></p>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图形处理器</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">羊驼毛 (52K)</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">莱昂 OIG (210K)</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开助手 (10K)</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SlimOrca (518K) *</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">抱脸</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 T4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">84小时47米</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">163小时48米</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">30小时51米</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1301小时24米*</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解除懒惰专业版</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 T4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3小时20米（25.4倍）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5小时43米（28.7倍）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1小时12米（25.7倍）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">71小时40米（18.1倍）*</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰麦克斯</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 T4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3小时4米（27.6倍）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5小时14米（31.3倍）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1小时6米（28.1倍）</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">54小时20米（23.9倍）*</font></font></td>
</tr>
</tbody>
</table>
<p dir="auto"><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">多 GPU 系统（2 个 GPU）上的峰值内存使用量</font></font></strong></p>
<table>
<thead>
<tr>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">系统</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">图形处理器</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">羊驼毛 (52K)</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">莱昂 OIG (210K)</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开助手 (10K)</font></font></th>
<th><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SlimOrca (518K) *</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">抱脸</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 T4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.4GB| 6GB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.2GB| 5.3GB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">14.3GB | 14.3GB 6.6GB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.9GB | 10.9GB 5.9GB*</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解除懒惰专业版</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 T4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.7GB| 4.9GB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.5GB| 4.9GB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.5GB | 4.9GB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.2GB| 4.7GB *</font></font></td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不懒惰麦克斯</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 T4</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.5GB | 10.5GB 5GB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.6GB | 10.6GB 5GB</font></font></td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.6GB | 10.6GB 5GB</font></font></td>
<td>10.5GB | 5GB *</td>
</tr>
</tbody>
</table>
<ul dir="auto">
<li>Slim Orca <code>bsz=1</code> for all benchmarks since <code>bsz=2</code> OOMs. We can handle <code>bsz=2</code>, but we benchmark it with <code>bsz=1</code> for consistency.</li>
</ul>
</details>
<p dir="auto"><a target="_blank" rel="noopener noreferrer nofollow" href="https://camo.githubusercontent.com/cf2210423ec035ee9dde7baab47e7dd279ac448c39e686bfc5a1129d0abc4a39/68747470733a2f2f692e6962622e636f2f734a37526847472f696d6167652d34312e706e67"><img src="https://camo.githubusercontent.com/cf2210423ec035ee9dde7baab47e7dd279ac448c39e686bfc5a1129d0abc4a39/68747470733a2f2f692e6962622e636f2f734a37526847472f696d6167652d34312e706e67" alt="" data-canonical-src="https://i.ibb.co/sJ7RhGG/image-41.png" style="max-width: 100%;"></a>
<br></p>
<div class="markdown-heading" dir="auto"><h3 tabindex="-1" class="heading-element" dir="auto"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">谢谢至</font></font></h3><a id="user-content-thank-you-to" class="anchor" aria-label="永久链接： 谢谢" href="#thank-you-to"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg></a></div>
<ul dir="auto">
<li><a href="https://github.com/HuyNguyen-hust"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HuyNguyen-渴望</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将</font></font><a href="https://github.com/unslothai/unsloth/pull/238" data-hovercard-type="pull_request" data-hovercard-url="/unslothai/unsloth/pull/238/hovercard"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RoPE 嵌入速度提高 28%</font></font></a></li>
<li><a href="https://github.com/RandomInternetPreson"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RandomInternetPreson</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于确认 WSL 支持</font></font></li>
<li><a href="https://github.com/152334H"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">152334H</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于实验性 DPO 支持</font></font></li>
<li><a href="https://github.com/atgctg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atgctg</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于语法高亮</font></font></li>
</ul>
</article></div>
